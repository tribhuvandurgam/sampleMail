(function(e){"use strict";e.widget("ui.CommentWidget",{_create:function(){var t=this;t.serviceFactory=SBW.Singletons.serviceFactory,t.$tabsDiv=e("<div/>").attr("class","sbw-widget sbw-comment-widget-"+t.options.theme),t.$commentsContainer=e("<div/>").attr("class","comments-container"),t.$textBox=e("<textarea/>",{name:"comment","class":"comment-box",placeholder:t.options.labelPlaceholder||"Enter your comment..."}),t.$postBtn=e("<button/>").addClass("post-comment").text(t.options.buttonText||"Comment"),t.$postBtn.on("click",this,this._addPost),t.$actionContainer=e("<div/>").attr("class","action-container"),t.$actionContainer.append(t.$textBox,t.$postBtn),t.$tabsDiv.append(t.$commentsContainer,t.$actionContainer),t.element.append(t.$tabsDiv),t.options.displayComments&&t._populateComments(t)},options:{successMessage:"",service:"",offset:0,theme:"default",labelPlaceholder:"Enter text..",buttonText:"Comment",title:"Comment",postIdObject:{assetId:"",assetCollectionId:""},displayResponse:!1,displayComments:!1,displayImage:!0,displayPost:!1},setPostId:function(e){var t=this;t.options.postIdObject=e},destroy:function(){this.$tabsDiv.remove(),e.Widget.prototype.destroy.call(this)},_populateComments:function(e){var t=e,n=function(e){var n=[];e.forEach(function(e){if(!t.options.displayImage)n.push("<div class='comment'><span class='frmuser'>"+e.fromUser+" : "+"</span><span class='msg'>"+e.text+"</span></div>"),t.$commentsContainer.empty(),t.$commentsContainer.append(n);else{var r=function(r){n.push('<div class="comment"><img class="comment-image" src="'+r+'"><span class="frmuser">'+e.fromUser+" : "+"</span><span class='msg'>"+e.text+"</span></div>"),t.$commentsContainer.empty(),t.$commentsContainer.append(n)};SBW.api.getProfilePic(t.options.service,e.fromUserId,r,function(e){console.log(e)})}})},r=function(){t.$commentsContainer.append("<p>Unable to fetch Comments from"+t.options.service+"</p>")};SBW.api.getComments(t.options.service,t.options.postIdObject,n,r)},_addPost:function(e){var t=e.data,n=t.$textBox.val(),r=function(e){if(t.displayResponse){var n=t.$tabsDiv.find(".sbw-success-message");n.length!==0?n.html(n.text().substr(0,n.text().length-1)+", "+e.serviceName+"."):t.$tabsDiv.append('<span class="sbw-success-message">Successfully posted on '+e.serviceName+".</span>")}t.options.displayComments&&t._populateComments(t)},i=function(e){t.displayResponse&&t.$tabsDiv.append('<span class="sbw-error-message">Some problem in posting with '+e.serviceName+".</span>")};t.$textBox.val(""),t.displayResponse&&(t.$tabsDiv.find(".sbw-success-message").remove(),t.$tabsDiv.find(".sbw-error-message").remove()),SBW.api.postComment(t.options.service,t.options.postIdObject,n,r,i)}})})(jQuery),function(e){"use strict";e.widget("ui.FeedWidget",{_create:function(){var t=this;t.serviceFactory=SBW.Singletons.serviceFactory,t.$tabsDiv=e("<div/>").addClass("tabs sbw-widget sbw-feed-widget-"+t.options.theme),t.$tabsUl=e("<ul/>").addClass("tabs-ul"),t.element.append(t.$tabsDiv),t.$tabsDiv.append(t.$tabsUl),t.$postTab=e("<li/>"),t.$postTag=e("<a/>").addClass("tab-1").html("<span>"+t.options.title+"</span>"),t.$postTab.append(t.$postTag),t.$tabsUl.append(t.$postTab),t.$postTabDiv=e("<div/>").addClass("tab-content"),t.$postTabDiv.insertAfter(t.$tabsUl),t.$containerDiv=e("<div/>").addClass("sbw-feed-container"),t.$commentsDiv=e("<div/>").addClass("comment-container"),t.$postTabDiv.append(t.$containerDiv),t.$tabsUl.after(t.$commentsDiv),t.$input=e("<textarea/>",{name:"comment","class":"post-box",maxlength:5e3,cols:62,rows:8,placeholder:t.options.labelPlaceholder}).on("keyup",this,function(){t.$charsleft.html(this.value.length)}),t.$charsleft=e("<p/>").addClass("chars-count").text("0"),t.$containerDiv.append('<p class="sharemessage">'+t.options.shareMessage+"</p>"),t.$containerDiv.append(t.$input),t.$postBtn=e("<button/>").addClass("post-btn").text(t.options.buttonText),t.$checkBoxesDiv=e("<div/>").addClass("checkbox-container"),t.options.services.forEach(function(n){var r=e("<div/>").addClass("checkbox "+n).append("<input type='checkbox' name='service' value='"+n+"'/>").append("<div class='userimage'></div>").append("<div class='service-container "+n+"'></div>");t.$checkBoxesDiv.append(r)}),t.$checkBoxesDiv.append(t.$postBtn).append(t.$charsleft).append('<div class="clear"></div>');var n=function(e){var n=[],r="",i="";e.forEach(function(e){r=new Date(e.createdTime),i=r.toDateString(),n=[],n.push('<div class="comments"><img class="uimg" width="50" height="50" src="'+e.picUrl+'"/>'),n.push('<p class="details"><span class="name">'+e.fromUser+'</span><span class="time">'+i+"</span></p>"),n.push('<p class="message">'+e.text+"</p>"),n.push('<p class="likes"><span>Like/Favorite  '+e.likeCount+'</span><span class="service '+e.serviceName+'">&nbsp;</span></p></div>'),t.$commentsDiv.append(n.join(""))})},r=function(){};SBW.api.getCommentsForUrl(t.options.services,{url:t.options.id,limit:t.options.limit,offset:t.options.offset},n,r),t.$checkBoxesDiv.insertAfter(t.$input),t.$postBtn.on("click",this,this._addPost),t.$containerDiv.find(".checkbox-container").on("click",".checkbox input",function(n){var r=this,i=r.value;e(r).is(":checked")?(e(r).prop("checked",!1),t.serviceFactory.getService(i).startActionHandler(function(){e(r).prop("checked",!0),t.$checkBoxesDiv.find(".service-container."+i).addClass("selected"),SBW.api.getProfilePic([i],null,function(e){e&&t.$checkBoxesDiv.find("."+i+" .userimage").css("background","url("+e+")")},function(e){})})):t.$checkBoxesDiv.find(".service-container."+i).removeClass("selected")})},options:{successMessage:"",services:["facebook","twitter","linkedin"],limit:10,offset:0,theme:"default",id:location.href,labelPlaceholder:"Enter text..",buttonText:"Publish",title:"Feed",shareMessage:"Share this page"},destroy:function(){this.tabsDiv.remove(),e.Widget.prototype.destroy.call(this)},_addPost:function(e){var t=e.data,n=t.$input.val(),r=[],i=function(e){var n=t.$containerDiv.find(".sbw-success-info");n.length!==0?n.html(n.text().substr(0,n.text().length-1)+", "+e.serviceName+"."):t.$containerDiv.append('<span class="sbw-success-info">Successfully posted on '+e.serviceName+".</span>")},s=function(e){t.$containerDiv.append('<span class="sbw-success-info">Some problem in posting with '+e.serviceName+".</span>")};t.$checkBoxesDiv.find("input:checked").each(function(){r.push(this.value),this.value==="twitter"&&(n=n.substring(0,117))}),n=window.location.href+" "+n,t.$containerDiv.find(".sbw-success-message").remove(),t.$containerDiv.find(".sbw-error-message").remove(),SBW.api.publishMessage(r,n,i,s)}})}(jQuery),function(e){"use strict";e.widget("ui.FollowPageWidget",{count:0,options:{userDetails:null,services:["facebook","twitter","linkedin"],theme:"default"},serviceCount:null,_create:function(){var t=this,n,r=t.options.theme,i=e("<div />",{"class":"sbw-widget sbw-follow-page-widget-"+r}),s=e("<div />",{"class":"service-container"}),o=e("<span />",{"class":"follow-button"}),u=e("<div />",{"class":"count-container"}).text("0"),a=360/this.options.services.length;t.serviceCount={},e.each(this.options.services,function(r,i){var o=t.createServiceElement(i,s,a*r,t);n=e("<div />",{"class":i+"-count service-count-container"}).text("0").appendTo(o)}),e(s).append(o,u),e(i).append(s),e(t.element).append(i),t.hideServices(),e(i).hover(t.showServices,t.hideServices)},createServiceElement:function(t,n,r,i){var s=e("<div/>",{"class":t,"data-service":t,click:function(e){i.followForService(e,i)},style:"-webkit-transform : rotate("+r+"deg)"+"translate(3em) rotate(-"+r+"deg); "+"-moz-transform : rotate("+r+"deg)"+"translate(3em) rotate(-"+r+"deg); "+"-ms-transform : rotate("+r+"deg)"+"translate(3em) rotate(-"+r+"deg); "+"-o-transform : rotate("+r+"deg)"+"translate(3em) rotate(-"+r+"deg); "+"transform : rotate("+r+"deg)"+"translate(3em) rotate(-"+r+"deg)"}).appendTo(n);return s},showServices:function(){var t=e("#followpage-widget div.service-container");t.find("div").show(),t.find("div.count-container").hide()},hideServices:function(){var t=e("#followpage-widget div.service-container");t.find("div").hide(),t.find("div.count-container").show()},updateForService:function(t){var n=this;SBW.api.getFollowCount(t,n.options.userDetails[t],function(r){var i=e("#followpage-widget div.service-container");r&&r.count&&(n.serviceCount[t]&&(n.count-=n.serviceCount[t]),n.serviceCount[t]=r.count,n.count+=r.count,i.find("div."+t+"-count").text(r.count),i.find("div.count-container").text(n.count))})},followForService:function(e,t){var n=e.srcElement||e.target,r=n.dataset.service,i=this;SBW.api.follow(r,t.options.userDetails[r],function(e){i.updateForService(r)},function(e){SBW.logger.error("Error while following on - "+r)})},destroy:function(){e.Widget.prototype.destroy.call(this,arguments)}})}(jQuery),function(e){e.widget("ui.LikeWidget",{isLiked:!1,options:{objectId:"",service:"",theme:"default",objectType:"POST"},_create:function(){var t=this,n=t.options.theme,r=e("<div />").addClass("sbw-like-widget-"+n);t.$likeContainer=e("<div />").addClass("like-container"),t.$likeCountContainer=e("<div />").addClass("count-container"),r.append(t.$likeContainer).append(t.$likeCountContainer),e(t.element).append(r),t.$likeContainer.on("click",t,t.likeForService)},likeForService:function(e){var t=e.data;t.options.objectType==="POST"?t.handleLikeClickOnPost.call(t):t.handleLikeClickOnComment.call(t)},handleLikeClickOnPost:function(){var t=this,n=t.options.service,r=t.options.objectId,i=function(n){var r=e("<img/>").attr("src",n);t.$likeCountContainer.append(e(r))},s=function(){},o=function(e){t.$likeCountContainer.empty();for(var r=0;r<e.likeCount;r++){var o=e.likes[r].user.id;e.likes[r].user.userImage?i(e.likes[r].user.userImage):SBW.api.getProfilePic(n,o,i,s)}},u=function(){alert("Some problem occurred while getting likes")},a=function(e){SBW.api.getLikes(n,r,o,u),t.$likeContainer.removeClass("liked"),t.isLiked=!1},f=function(){alert("Some problem occurred while un liking post")},l=function(e){SBW.api.getLikes(n,r,o,u),t.$likeContainer.addClass("liked"),t.isLiked=!0},c=function(){alert("Some problem occurred while liking post")};t.isLiked?SBW.api.unlike(n,r,a,f):SBW.api.like(n,r,l,c)},handleLikeClickOnComment:function(){var e=this,t=e.options.objectId,n=e.options.service,r=function(t){var n=t.likeCount;e.$likeCountContainer.addClass("comment").html(n)},i=function(){alert("Some problem occurred while getting likes")},s=function(s){SBW.api.getLikes(n,t,r,i),e.$likeContainer.addClass("liked"),e.isLiked=!0},o=function(){alert("Some problem occurred while liking post")},u=function(s){SBW.api.getLikes(n,t,r,i),e.$likeContainer.removeClass("liked"),e.isLiked=!1},a=function(){alert("Some problem occurred while un liking post")};e.isLiked?SBW.api.unlike(n,t,u,a):SBW.api.like(n,t,s,o)},destroy:function(){e.Widget.prototype.destroy.call(this)}})}(jQuery),function(e){"use strict";e.widget("ui.PageLikeWidget",{count:{linkedin:0,twitter:0,facebook:0,flickr:0},options:{services:"",theme:"default"},_create:function(){var t=this,n=t.options.theme,r=e("<div />").addClass("sbw-widget sbw-page-like-widget-"+n);t.$serviceContainer=e("<div />").addClass("service-container");var i=e("<span />").addClass("like-button");t.$likeCountContainer=e("<span />").addClass("count-container");var s=360/this.options.services.length;e.each(this.options.services,function(e,n){var r=t.createServiceElement(n.serviceName,t.$serviceContainer,s*e,t)}),e(t.$serviceContainer).append(i,t.$likeCountContainer),e(r).append(t.$serviceContainer),e(t.element).append(r),t.$serviceContainer.children("div").hide(),e(r).hover(t.showServices,t.hideServices)},createServiceElement:function(t,n,r,i){return e("<div></div>",{"class":t,"data-service":t,click:function(e){i.likeForService(e,i)},style:"-webkit-transform : rotate("+r+"deg)"+"translate(3em) rotate(-"+r+"deg); "+"-moz-transform : rotate("+r+"deg)"+"translate(3em) rotate(-"+r+"deg); "+"-ms-transform : rotate("+r+"deg)"+"translate(3em) rotate(-"+r+"deg); "+"-o-transform : rotate("+r+"deg)"+"translate(3em) rotate(-"+r+"deg); "+"transform : rotate("+r+"deg)"+"translate(3em) rotate(-"+r+"deg)"}).appendTo(n)},showServices:function(){var t=this;e(t).find(".count-container").hide(),e(t).find(".service-container div").show()},hideServices:function(){var t=this;e(t).find(".count-container").show(),e(t).find(".service-container div").hide()},likeForService:function(t,n){var r=t.srcElement||t.target,i=r.dataset.service,s;for(var o in n.options.services)n.options.services[o].serviceName===i&&(s=n.options.services[o].objectId);var u=function(t){var i=t.likeCount,s=0;if(i!==null)var o=e("<span />").addClass("service-count-container").html(i).appendTo(r);n.count[t.serviceName]=i;for(var u in n.count)s+=n.count[u];n.$likeCountContainer.addClass("liked").html(s)},a=function(e){p(e)},f=function(e){SBW.api.getLikes(i,s,u,a),n.$serviceContainer.find("."+i).removeClass("liked"),n.$serviceContainer.find(".liked").length>2||n.$serviceContainer.find(".like-button").removeClass("liked")},l=function(){p(response)},c=function(e){n.$serviceContainer.find("."+i).addClass("liked"),n.$serviceContainer.find(".like-button").addClass("liked"),SBW.api.getLikes(i,s,u,a)},h=function(e){p(e)};n.$serviceContainer.find("."+i).hasClass("liked")?SBW.api.unlike(i,s,f,l):SBW.api.like(i,s,c,h);var p=function(e){n.element.append('<span class="sbw-error-message">'+e.message+"</span>")};n.element.find(".sbw-success-message").remove(),n.element.find(".sbw-error-message").remove()},destroy:function(){e.Widget.prototype.destroy.call(this)}})}(jQuery),function(e){"use strict";e.widget("ui.LoginWidget",{_create:function(){var t=this;t.serviceFactory=SBW.Singletons.serviceFactory,t.$tabsDiv=e("<div/>").attr("class","sbw-widget sbw-login-widget-"+t.options.theme),t.$actionStrip=e("<div/>",{"class":"checkbox-container"}),t.$tabsDiv.on("click",".check-container input",function(n){var r=this,i=r.value;e(r).is(":checked")?(e(r).prop("checked",!1),t.serviceFactory.getService(i).startActionHandler(function(){e(r).prop("checked",!0),t.$actionStrip.find(".service-container."+i).addClass("selected"),SBW.api.getProfilePic([i],null,function(e){e&&t.$actionStrip.find("."+i+" .userimage").css({background:'url("'+e+'")',"background-size":"40px 40px"})},function(e){})})):t.$actionStrip.find(".service-container."+i).removeClass("selected")}),t.options.services.forEach(function(n){var r=e("<div/>").addClass("check-container "+n).append("<input type='checkbox' name='service' value='"+n+"'/>").append("<div class='userimage'></div>").append("<div class='service-container "+n+"'></div>");t.$actionStrip.append(r)}),t.$actionStrip.append('<div class="clear"></div>'),t.$tabsDiv.append(t.$actionStrip),t.element.append(t.$tabsDiv)},options:{services:["facebook"],theme:"default",type:"checkbox"},checkUserLoggedIn:function(e,t){var n=[],r=e.length,i=0;e.forEach(function(e){var s=function(s){i+=1,n.push({service:e,userLoggedIn:s}),i==r&&t(n)};SBW.api.checkUserLoggedIn(e,s)})},destroy:function(){this.$tabsDiv.remove(),e.Widget.prototype.destroy.call(this)}})}(jQuery),function(e){"use strict";e.widget("ui.PostWidget",{_create:function(){var t=this;t.serviceFactory=SBW.Singletons.serviceFactory,t.$tabsDiv=e("<div/>").attr("class","tabs sbw-widget sbw-post-widget-"+t.options.theme),t.$tabsUl=e("<ul/>").attr("class","tabs-ul"),t.element.append(t.$tabsDiv),t.$tabsDiv.append(t.$tabsUl),t.$postTab=e("<li/>"),t.postTag=e("<a/>").addClass("tab-1 selected").html("<span>"+t.options.title+"</span>"),t.$postTab.append(t.postTag),t.$tabsUl.append(t.$postTab),t.$uploadPhotoTab=e("<li/>"),t.uploadPhotoTag=e("<a/>").addClass("tab-2").html("<span>Upload Photo</span>"),t.$uploadPhotoTab.append(t.uploadPhotoTag),t.$tabsUl.append(t.$uploadPhotoTab),t.$uploadVideoTab=e("<li/>"),t.uploadVideoTag=e("<a/>").addClass("tab-3").html("<span>Upload Video</span>"),t.$uploadVideoTab.append(t.uploadVideoTag),t.$tabsUl.append(t.$uploadVideoTab),t.$postTabDiv=e("<div/>").addClass("tab-content"),t.$postTabDiv.insertAfter(t.$tabsUl),t.$containerDiv=e("<div/>").addClass("tab-1 sbw-post-container"),t.$photocontainerDiv=e("<div/>").addClass("tab-2 hide").UploadWidget({display:"embedded",functionality:"image",services:t.options.services}),t.$videocontainerDiv=e("<div/>").addClass("tab-3 hide").UploadWidget({display:"embedded",functionality:"video",services:t.options.services}),t.$postTabDiv.append(t.$containerDiv),t.$postTabDiv.append(t.$photocontainerDiv),t.$postTabDiv.append(t.$videocontainerDiv),t.$tabsUl.on("click","li a",function(){e(this).hasClass("selected")||(t.$tabsDiv.find(".tab-content>div").addClass("hide"),t.$postTabDiv.find("."+e(this).attr("class")).removeClass("hide"),t.$tabsUl.find("li a").removeClass("selected"),e(this).addClass("selected"))}),t.$input=e("<textarea/>",{name:"comment","class":"post-box",maxlength:5e3,cols:62,rows:8,placeholder:t.options.labelPlaceholder}).on("keydown",this,function(e){e.keyCode===17&&(t.ctrlDown=!0)}).on("keyup",this,function(n){t.$charsleft.html(this.value.length);if(t.ctrlDown&&n.keyCode===86){t.ctrlDown=!1;var r=this.value,i=r.match(/((\b(https?|ftp|file)?:\/\/|www)[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig);if(i instanceof Array&&i[0].length!==0){var s=function(n){if(t.$containerDiv.find(".link-preview").length===0&&n.title){var r=[];r.push('<div class="link-preview">'),n.previewUrl&&r.push('<img class="previewimg" height="50" width="50" src="'+n.previewUrl+'"/>'),r.push('<div class="link-info"><div class="link-title"><a href="#">'+n.title+"</a></div>"),r.push('<div class="link-description">'+(n.description||n.url)+"</div></div>"),r.push('<div class="close">x</div><div class="clear"></div></div>'),t.$containerDiv.append(r.join("")),t.$containerDiv.find(".close").bind("click",function(){e(this).parent(".link-preview").remove()})}},o=function(e){};t.$containerDiv.find(".link-preview").length===0&&SBW.Singletons.utils.getMetaForUrl(i[0],s,o)}}}),t.$charsleft=e("<p/>").addClass("chars-count").text("0"),t.$containerDiv.append(t.$input),t.$postBtn=e("<button/>").addClass("post-btn").text(t.options.buttonText),t.$checkBoxesDiv=e("<div/>").addClass("checkbox-container"),t.options.services.forEach(function(n){var r=e("<div/>").addClass("checkbox "+n).append("<input type='checkbox' name='service' value='"+n+"'/>").append("<div class='userimage'></div>").append("<div class='service-container "+n+"'></div>");t.$checkBoxesDiv.append(r)}),t.$checkBoxesDiv.append(t.$postBtn).append(t.$charsleft).append('<div class="clear"></div>'),t.$checkBoxesDiv.insertAfter(t.$input),t.$postBtn.on("click",this,this._addPost),t.$containerDiv.find(".checkbox-container").on("click",".checkbox input",function(n){var r=this,i=r.value;e(r).is(":checked")?(e(r).prop("checked",!1),t.serviceFactory.getService(i).startActionHandler(function(){e(r).prop("checked",!0),t.$checkBoxesDiv.find(".service-container."+i).addClass("selected"),SBW.api.getProfilePic([i],null,function(e){e&&t.$checkBoxesDiv.find("."+i+" .userimage").css("background","url("+e+")")},function(e){})})):t.$checkBoxesDiv.find(".service-container."+i).removeClass("selected")})},options:{successMessage:"",services:["facebook","twitter","linkedin"],limit:10,offset:0,theme:"default",labelPlaceholder:"Enter text..",buttonText:"Publish",title:"Post"},destroy:function(){this.$tabsDiv.remove(),e.Widget.prototype.destroy.call(this)},_addPost:function(e){var t=e.data,n=t.$input.val(),r=[],i=function(e){var n=t.$containerDiv.find(".sbw-success-message");n.length!==0?n.html(n.text().substr(0,n.text().length-1)+", "+e.serviceName+"."):t.$containerDiv.append('<span class="sbw-success-message">Successfully posted on '+e.serviceName+".</span>")},s=function(e){t.$containerDiv.append('<span class="sbw-error-message">Some problem in posting with '+e.serviceName+".</span>")};t.$checkBoxesDiv.find("input:checked").each(function(){r.push(this.value),this.value==="twitter"&&(n=n.substring(0,140))}),t.$containerDiv.find(".sbw-success-message").remove(),t.$containerDiv.find(".sbw-error-message").remove(),SBW.api.publishMessage(r,n,i,s)}})}(jQuery),function(e){"use strict";e.widget("ui.PostShareWidget",{_create:function(){var t=this;t.shareObject={message:t.options.message,picture:t.options.icon,link:t.options.link,name:t.options.name,caption:t.options.caption,description:t.options.description,actions:{name:t.options.actions.name,link:t.options.actions.link}},t.$widgetContainer=e("<div/>").addClass("sbw-widget sbw-post-share-widget-"+t.options.theme),t.$title=e("<textarea/>").attr({"class":"message",placeholder:"Title"}),t.$description=e("<textarea/>").attr({"class":"description",placeholder:"Description"}),t.$iconContainer=e("<div/>").addClass("icon-container"),t.$icon=e("<img/>").attr({"class":"icon",src:t.options.icon}),t.$iconContainer.append(t.$icon),t.$shareButton=e("<button/>").addClass("share-button").text("Share"),t.$checkBoxContainer=e("<div/>").addClass("checkbox-widget-container"),t.$checkBoxContainer.LoginWidget({services:t.options.serviceArray}),t.$checkBoxContainer.append(t.$shareButton),t.options.shareButton!=="on"&&t.$shareButton.hide(),t.$postDescriptionContainer=e("<div/>").addClass("post-description-container"),t.$postDescriptionContainer.append(t.$title,t.$description),t.$widgetContainer.append(t.$iconContainer,t.$postDescriptionContainer,t.$checkBoxContainer),t.element.append(t.$widgetContainer),t.$shareButton.on("click",this,this.postShare),t.$postDescriptionContainer.change(function(n){var r=n.target.className,i=e(this).children("."+n.target.className).val();t.shareObject[r]=i})},options:{theme:"default",serviceArray:["facebook"],shareButton:"on",message:"",icon:"http://www.socialbyway.com/style/images/logo.png",link:"",caption:"",name:"",description:"",actions:{name:"",link:""}},authenticate:function(e,t){SBW.Singletons.serviceFactory.getService(e).startActionHandler(t)},setIcon:function(e){this.shareObject.picture=e,this.$icon.attr("src","iconUrl")},setTitle:function(e){this.shareObject.message=e,this.$title.text(e)},setDescription:function(e){this.shareObject.description=e,this.$description.text(e)},setMetaData:function(e){this.shareObject.link=e.link,this.shareObject.name=e.name,this.shareObject.caption=e.name},setAction:function(e){this.shareObject.actions.link=e.link,this.shareObject.actions.name="View on "+e.name},setData:function(e){this.shareObject={message:e.message,picture:e.picture,link:e.link,name:e.name,caption:e.caption,description:e.description,actions:{name:"View on "+e.actions.name,link:e.actions.link}},this.$title.text(e.message),this.$description.text(e.description)},set:function(e,t){if(typeof t=="object")if(e!=="actions")for(var n in t)this.shareObject[n]=t[n],n==="message"?this.$title.text(t[n]):n==="description"&&this.$description.text(t[n]);else for(var n in t)this.shareObject[e][n]=t[n];else this.shareObject[e]=t,e==="message"?this.$title.text(t):e==="description"&&this.$description.text(t)},postShare:function(t){var n=t.data||this,r=[],i=n.shareObject,s=function(t){n.$successText&&n.$successText.empty(),n.$successText=e("<p/>").text("Successfully posted in "+t.serviceName),n.$widgetContainer.append(n.$successText),n.$successText.delay(1e3).fadeOut()},o=function(t){n.$failureText&&n.$failureText.empty(),n.$failureText=e("<p/>").text("Error while publishing media in "+t.serviceName),n.$widgetContainer.append(n.$failureText)};n.$checkBoxContainer.find("input:checked").each(function(){r.push(this.value)}),SBW.api.postShare(r,i,s,o)},destroy:function(){e.Widget.prototype.destroy.call(this)}})}(jQuery),function(e){"use strict";e.widget("ui.SharePageWidget",{count:0,options:{url:null,services:["facebook","twitter","linkedin"],theme:"default"},_create:function(){var t=this,n,r,i,s,o,u,a;r=t.options.theme,i=e("<div />",{"class":"sbw-widget sbw-share-page-widget-"+r}),s=e("<div />",{"class":"service-container"}),o=e("<span />",{"class":"share-button"}),u=e("<div />",{"class":"count-container"}),a=360/this.options.services.length,e.each(this.options.services,function(r,i){var o=t.createServiceElement(i,s,a*r,t);SBW.api.getShareCount([i],t.options.url,function(r){r&&r.count&&(t.count+=r.count,n=e("<div />",{"class":"service-count-container"}).text(r.count).appendTo(o),u.text(t.count))})}),e(s).append(o,u),e(i).append(s),e(t.element).append(i),t.hideServices(),e(i).hover(t.showServices,t.hideServices)},createServiceElement:function(t,n,r,i){var s=e("<div/>",{"class":t,"data-service":t,click:function(e){i.shareForService(e,i)},style:"-webkit-transform : rotate("+r+"deg)"+"translate(3em) rotate(-"+r+"deg); "+"-moz-transform : rotate("+r+"deg)"+"translate(3em) rotate(-"+r+"deg); "+"-ms-transform : rotate("+r+"deg)"+"translate(3em) rotate(-"+r+"deg); "+"-o-transform : rotate("+r+"deg)"+"translate(3em) rotate(-"+r+"deg); "+"transform : rotate("+r+"deg)"+"translate(3em) rotate(-"+r+"deg)"}).appendTo(n);return s},showServices:function(){var t=e("div.service-container");t.find("div").show(),t.find("div.count-container").hide()},hideServices:function(){var t=e("div.service-container");t.find("div").hide(),t.find("div.count-container").show()},shareForService:function(e,t){var n=e.srcElement||e.target,r=n.dataset.service,i=function(e){var n=t.element.find(".sbw-success-message");n.length!==0?n.html(n.text().substr(0,n.text().length-1)+", "+e.serviceName+"."):t.element.append('<span class="sbw-success-message">Successfully shared on '+e.serviceName+".</span>")},s=function(e){t.element.append('<span class="sbw-error-message">'+e.serviceName+" says,"+e.message+".</span>")};t.element.find(".sbw-success-message").remove(),t.element.find(".sbw-error-message").remove(),SBW.api.publishMessage([r],t.options.url||document.url,i,s)},destroy:function(){e.Widget.prototype.destroy.call(this,arguments)}})}(jQuery),function(e){"use strict";e.widget("ui.UploadWidget",{_create:function(){var t=this,n=["facebook","flickr","twitter","picasa"];t.options.serviceArray.forEach(function(e,t,r){n.indexOf(e)===-1&&r.splice(r.indexOf(e),1)}),t.$widgetContainer=e("<div/>").addClass("sbw-widget sbw-upload-widget-"+t.options.theme),t.options.display==="stand-alone"&&(t.$tabContainer=e("<div/>").addClass("tab-container"),t.$tabs=e("<ul/>").addClass("tabs"),t.$tabContainer.append(t.$tabs),t.$imageTab=e("<li/>").attr({"class":"image-tab selected",value:"image"}).html("Upload Image"),t.$videoTab=e("<li/>").attr({"class":"video-tab",value:"video"}).html("Upload Video"),t.$tabs.append(t.$imageTab,t.$videoTab),t.$widgetContainer.append(t.$tabContainer)),t.element.append(t.$widgetContainer),t.$helpMessage=e("<p/>").text("Select media to upload"),t.$browseButtonWrapper=e("<div/>").addClass("browse-button-wrapper"),t.$browseButton=e("<input/>").attr("type","file").html("Choose file"),t.$browseButtonWrapper.append(t.$browseButton),t.$dummyBrowseButton="<div class='dummy-button'><div class='choose-file'>Choose File</div><div class='file-display'>No File Choosen</div></div>",t.$browseButtonWrapper.append(t.$dummyBrowseButton),t.$errorAlert=e("<div/>").addClass("error-display").hide(),t.$loader=e("<div/>").addClass("loader").hide(),t.$mediaContainer=e("<div/>").addClass("media-container "),t.$description=e("<textarea/>").attr({"class":"description-container",maxlength:5e3,placeholder:"Enter text...."}),t.$titleInput=e("<textarea/>").attr({"class":"title-container",maxlength:5e3,placeholder:"Title"}),t.$mediaContainer.append(t.$helpMessage,t.$browseButtonWrapper,t.$errorAlert,t.$loader,t.$titleInput,t.$description),t.$widgetContainer.append(t.$mediaContainer),t.$uploadButton=e("<button/>").addClass("upload-button").text("Publish"),t.$checkBoxContainer=e("<div/>").addClass("checkBox-container");var r=[];t.options.serviceArray.forEach(function(t){var n=e("<div/>").addClass("check-container "+t).append(e("<input/>",{type:"checkbox",name:"service",value:t})),i=e("<div/>").addClass("user-image "),s=e("<div/>").addClass("service-container "+t);n.append(i,s),r.push(n)}),t.$checkBoxContainer.append(r),t.$mediaContainer.append(t.$checkBoxContainer,t.$uploadButton),t.$uploadButton.on("click",this,this._publishPhoto),e(t.$tabs).on("click","li",function(){var n=e(this);n.addClass("selected").siblings("li").removeClass("selected"),t.options.functionality=n.attr("value"),n.attr("value")==="video"?t.$checkBoxContainer.find(".check-container.twitter").hide():t.$checkBoxContainer.find(".check-container.twitter").show()}),t.options.functionality==="video"?t.$checkBoxContainer.find(".check-container.twitter").hide():t.$checkBoxContainer.find(".check-container.twitter").show(),e(t.$checkBoxContainer).on("click","div.check-container input",function(n){var r=this;t.service=this.value;if(e(this).is("input:checked")){e(r).prop("checked",!1);var i=function(n){var i=n===undefined?undefined:n.id,s,o;e(r).siblings("div.service-container").toggleClass("selected"),e(r).prop("checked",!0),s=function(n){n&&e(t.$checkBoxContainer).find(".check-container."+t.service+" .user-image").css("background",'url("'+n+'")')},o=function(e){},SBW.api.getProfilePic(t.service,i,s,o)};t.authenticate(t.service,i)}else e(r).siblings("div.service-container").toggleClass("selected")}),t.$browseButton.change(function(){var t=this.value.replace("C:\\fakepath\\","");e(".file-display").html(t)})},options:{theme:"default",display:"stand-alone",functionality:"image",serviceArray:["facebook","flickr","picasa","twitter"],sizeLimit:{image:1024,video:20480}},authenticate:function(e,t){SBW.Singletons.serviceFactory.getService(e).startActionHandler(t)},_publishPhoto:function(t){var n=t.data,r=0,i=e(n.$description).val(),s=e(n.$titleInput).val(),o=[],u={description:i,title:s,location:"",file:n.$browseButton[0].files[0]},a=function(t){r+=1,r===o.length&&n.$loader.hide(),!n.$successText||n.$successText.text()===""?(n.$successText=e("<p/>").text("Successfully published media in "+t[0].serviceName),n.$widgetContainer.append(n.$successText)):n.$successText.text(n.$successText.text()+", "+t[0].serviceName)},f=function(t){r+=1,r===o.length&&n.$loader.hide(),!n.$failureText||n.$failureText.text()===""?(n.$failureText=e("<p/>").text("Error while publishing media in "+t[0].serviceName),n.$widgetContainer.append(n.$failureText)):n.$failureText.text(n.$failureText.text()+", "+t[0].serviceName)};n.$successText&&n.$successText.empty(),n.$failureText&&n.$failureText.empty(),n.$checkBoxContainer.find("input:checked").each(function(){o.push(this.value)}),n.options.functionality==="image"?n.$browseButton[0].files[0].size/1024<n.options.sizeLimit.image?(n.$errorAlert.hide(),o.length!==0&&n.$loader.show(),SBW.api.uploadPhoto(o,[u],a,f)):n.$errorAlert.show().text("Maximum upload size for image : 1MB"):n.$browseButton[0].files[0].size/1024<n.options.sizeLimit.video?(n.$errorAlert.hide(),o.length!==0&&n.$loader.show(),SBW.api.uploadVideo(o,[u],a,f)):n.$errorAlert.show().text("Maximum upload size for video : 20MB")}})}(jQuery);